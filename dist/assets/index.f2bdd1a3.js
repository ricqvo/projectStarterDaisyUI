import{j as T,r as f,F as O,a as D,b as C,c as m,B as $,N as y,S as A,R as x,v as M,L as B,d as V,e as Y}from"./vendor.d69f00f7.js";const U=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const b of r.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&i(b)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}};U();const e=T.exports.jsx,o=T.exports.jsxs,X=({array:l,setArray:d,fetchInventory:n})=>{const[i,a]=f.exports.useState("Shisha"),r=s=>{a(s.cat)},b={name:"",price:"",type:"Shisha"},k={price:""},g={cat:"Shisha"},S=async s=>{const h={name:s.name,price:s.price,type:i};console.log(h),await m.post("https://project-smokybar.herokuapp.com/inventory",h),n()},E=async(s,h)=>{console.log(s),await m.put(`https://project-smokybar.herokuapp.com/inventory/${h}`,s),n()},I=async s=>{if(!(await m.delete(`https://project-smokybar.herokuapp.com/inventory/${s}`)).data.success)return alert("Item could not be deleted. Please try again.");const v=l.filter(w=>w.id!==s);d(v)};return o("div",{className:"max-w-[90vw] m-auto",children:[e(O,{initialValues:g,onSubmit:s=>{r(s)},children:o(D,{className:"m-2 border-2 font-bold p-2 flex justify-center items-center",children:[e("label",{htmlFor:"",className:"font-bold text-xl p-2",children:e("h3",{children:"Chosen category: "})}),o(C,{name:"cat",component:"select",className:"m-2 text-xl p-2",children:[e("option",{value:"Shisha",children:"Shisha"}),e("option",{value:"Non-alcoholic",children:"Non-alcoholic"}),e("option",{value:"Beer-Wine-Cider",children:"Beer-Wine-Cider"}),e("option",{value:"Drink-alcoholic",children:"Drink-alcoholic"}),e("option",{value:"Drink-non-alcoholic",children:"Drink-non-alcoholic"}),e("option",{value:"Shot",children:"Shot"}),e("option",{value:"Bucket",children:"Bucket"}),e("option",{value:"Other",children:"Other"})]}),e("button",{type:"submit",className:"m-2 border-2 font-bold p-2",children:"CHANGE CATEGORY"})]})}),e(O,{initialValues:b,onSubmit:(s,{resetForm:h})=>{S(s),h()},children:o(D,{autoComplete:"off",className:"m-2 border-2 font-bold p-2 flex justify-center items-center",children:[e("label",{htmlFor:"",className:"font-bold text-xl p-2",children:e("h3",{children:"name:"})}),e(C,{name:"name",placeholder:"Name..",className:"m-2 text-xl p-2"}),e("label",{htmlFor:"",className:"font-bold text-xl p-2",children:e("h3",{children:"price:"})}),e(C,{name:"price",placeholder:"Price..",className:"m-2 text-xl p-2"}),e("br",{}),e("button",{type:"submit",className:"m-2 border-2 font-bold p-2",children:"ADD NEW ITEM"})]})}),e("div",{className:"m-2 text-white flex-col items-center justify-center",children:l.map((s,h)=>s.type===i&&o("div",{className:"bg-slate-500 border-2 p-5 flex w-[100%]",children:[o("div",{className:"text-3xl font-bold flex-grow text-white border-r-2 border-white p-3",children:[s.name," ",o("div",{className:" font-normal text-white",children:["for"," "]}),s.price," Kc"]}),o("div",{className:"flex items-center justify-center",children:[e("div",{className:"",children:e(O,{initialValues:k,onSubmit:(v,{resetForm:w})=>{E(v,s.id),w()},children:o(D,{autoComplete:"off",className:"m-2 font-bold",children:[e("label",{className:"font-bold text-xl ",children:"New price:"}),e(C,{name:"price",placeholder:"new price..",className:"m-2 text-xl text-black align-middle text-center"}),e("button",{type:"submit",className:"m-2 border-2 font-bold p-2 bg-green-600",children:"UPDATE PRICE"})]})})}),e("div",{className:"",children:e("button",{className:"m-2 border-2 font-bold p-2 bg-red-600",onClick:()=>I(s.id),children:"DELETE ITEM"})})]})]},h))})]})},G=({order:l,array:d})=>{const[n,i]=f.exports.useState("Shisha"),[a,r]=f.exports.useState([]),[b,k]=f.exports.useState(0),[g,S]=f.exports.useState(!1),E=`font-bold text-2xl  border-2 mt-3 mx-1 ${g?"border-green-500 text-white bg-green-500":"border-green-500 text-green-500"}`,I=()=>{S(!g)},s=async()=>{await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`).then(t=>{r(t.data),console.log(t.data)})};f.exports.useEffect(()=>{s()},[]);const h=t=>{i(t)},v=async t=>{const c={orderid:l.orderid,itemid:t.id,tobepaid:!1,paid:!1};await m.post("https://project-smokybar.herokuapp.com/orders",c);const p=await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`);console.log(p),r(p.data)},w=async t=>{console.log(t);const c={orderid:l.orderid,itemid:t.item.id,tobepaid:!1,paid:!1};await m.post("https://project-smokybar.herokuapp.com/orders",c);const p=await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`);console.log(p),r(p.data)},P=async t=>{r(a.filter(c=>c.orderId!==t.orderId)),await m.delete(`https://project-smokybar.herokuapp.com/orders/${t.orderId}`)},R=async t=>{await m.put(`https://project-smokybar.herokuapp.com/orders/${t.orderId}`,{tobepaid:!t.tobepaid});const c=await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`);console.log(c),r(c.data);let p=[];c.data.forEach(u=>{!u.paid&&u.tobepaid&&(p=[...p,u])}),k(0);let j=0;p.forEach(u=>{j+=parseInt(u.item.price)}),k(j)},F=async t=>{await m.put(`https://project-smokybar.herokuapp.com/orders/${t.orderId}`,{paid:!0});const c=await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`);r(c.data)},L=()=>{k(0),S(!g)},W=async()=>{const t=await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`);let c=0;g?(t.data.forEach(async u=>{u.tobepaid&&!u.paid&&await F(u)}),L()):console.log("not ready to pay");const p=await m.get(`https://project-smokybar.herokuapp.com/orders/${l.orderid}`);let j=p.data.length;p.data.forEach(u=>{(u.paid||u.tobepaid)&&(c+=1)}),console.log(j+"==="+c),j===c&&await m.put(`https://project-smokybar.herokuapp.com/ordername/${l.orderid}`,{done:!0})};return o("div",{className:"flex min-h-[70vh]",children:[e("div",{className:"w-[50vw]  bg-white",children:o("div",{className:"flex flex-col",children:[o("div",{className:"w-[100%] bg-slate-500 flex justify-center items-center",children:[e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Shisha"&&"bg-green-500"}`,onClick:()=>{h("Shisha")},children:"Shisha"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Non-alcoholic"&&"bg-green-500"}`,onClick:()=>{h("Non-alcoholic")},children:"Non-alc"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Beer-Wine-Cider"&&"bg-green-500"}`,onClick:()=>{h("Beer-Wine-Cider")},children:"BWC"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Drink-alcoholic"&&"bg-green-500"}`,onClick:()=>{h("Drink-alcoholic")},children:"Drink-alc"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Drink-non-alcoholic"&&"bg-green-500"}`,onClick:()=>{h("Drink-non-alcoholic")},children:"Drink-nonAlc"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Shot"&&"bg-green-500"}`,onClick:()=>{h("Shot")},children:"Shot"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Bucket"&&"bg-green-500"}`,onClick:()=>{h("Bucket")},children:"Bucket"}),e("button",{className:`flex justify-center items-center border-2 border-black text-black bg-white font-bold m-2 p-2 ${n==="Other"&&"bg-green-500"}`,onClick:()=>{h("Other")},children:"Other"})]}),e("div",{className:"m-2 text-white flex-col items-center justify-center",children:d.map((t,c)=>t.type===n&&e("button",{onClick:()=>{v(t)},className:"font-bold flex text-black border-2 border-black p-3 w-[170px] m-2 flex-wrap items-center justify-center",children:t.name},c+t.id+t.type+t.name+t.price))})]})}),e("div",{className:"w-[20vw] h-auto bg-white border-2 border-black",children:o("div",{className:"flex flex-col justify-center items-center",children:[e("div",{className:" font-bold text-2xl  border-b-2 border-slate-500 text-slate-500",children:"ORDERED ITEMS:"}),a.map((t,c)=>!t.paid&&!t.tobepaid&&o("div",{className:"flex m-2",children:[e("button",{className:" text-3xl text-red-500 font-bold  mr-9 bg-slate-500 px-2",onClick:()=>{console.log(t),P(t)},children:"X"}),e("button",{onClick:()=>{console.log({order:t}),w(t)},className:"text-xl font-bold flex-grow text-black\r p-1",children:t.item.name}),e("button",{className:" text-3xl text-green-500 font-bold  ml-9 bg-slate-500 px-2",onClick:()=>{console.log(t),R(t)},children:"P"})]},t.orderId+c+t.item.name+c))]})}),o("div",{className:"w-[15vw] h-auto bg-white border-2 border-black",children:[" ",o("div",{className:"flex flex-col justify-center items-center",children:[o("div",{className:" font-bold text-2xl  border-b-2 border-slate-500 text-slate-500",children:["SUM: ",b," kc"]}),o("div",{children:[e("button",{className:E,onClick:I,children:"READY"}),e("button",{className:" font-bold text-2xl  border-2 mt-3 border-red-500 text-red-500 mx-1",onClick:W,children:"PAY"})]}),a.map((t,c)=>t.tobepaid&&!t.paid&&o("div",{className:"flex m-2",children:[e("button",{className:" text-3xl text-red-500 font-bold  mr-9 bg-slate-500 px-2",onClick:()=>{console.log(t),R(t)},children:"X"}),e("div",{className:"text-xl font-bold flex-grow text-black\r p-1",children:t.item.name})]},t.orderId+c+t.item.name+c))]})]}),e("div",{className:"w-[15vw]  h-auto bg-white border-2 border-black",children:o("div",{className:"flex flex-col justify-center items-center",children:[e("div",{className:" font-bold text-2xl  border-b-2 border-slate-500 text-slate-500",children:"PAID:"}),a.map((t,c)=>t.paid&&e("div",{className:"flex m-2",children:e("div",{className:"text-xl font-bold flex-grow text-black\r p-1",children:t.item.name})},t.orderId+c+t.item.name+c))]})})]})},N=({tableid:l,fetchOrdersFromTable:d,orderNames:n,array:i})=>o($,{children:[e("div",{className:"w-screen flex flex-col justify-center items-center border-2",children:o("div",{className:"w-screen bg-slate-500 text-white font-bold flex items-center justify-center",children:[e("button",{onClick:async()=>{const r=M(),b={tableid:l,orderid:r,done:!1};console.log(b),await m.post("https://project-smokybar.herokuapp.com/ordername",b),d()},className:"m-4 border-2 border-green-500 font-bold p-2 text-green-500",children:"ADD NEW ORDER"}),n.map((r,b)=>{const k=`/orders/${r.orderid}`;return r.tableid===l&&!r.done&&e("div",{className:"m-2 border-2 border-white p-2",children:o(y,{to:k,activeStyle:{color:"black"},children:["ORDER ",b+1]})},r.orderid+l)})]})}),e(A,{children:n.map(r=>{const b=`/orders/${r.orderid}`;return e(x,{exact:!0,path:b,children:e(G,{order:r,array:i})},r.orderid)})})]}),H=()=>o("div",{className:"w-screen bg-slate-500 text-white font-bold flex items-center justify-center",children:[e("div",{className:"m-4 ",children:"TABLES:"}),e("div",{className:"m-4",children:e(y,{to:"/table1",activeStyle:{color:"black"},children:"ONE"})}),e("div",{className:"m-4",children:e(y,{to:"/table2",activeStyle:{color:"black"},children:"TWO"})}),e("div",{className:"m-4",children:e(y,{to:"/table3",activeStyle:{color:"black"},children:"THREE"})}),e("div",{className:"m-4",children:e(y,{to:"/table4",activeStyle:{color:"black"},children:"FOUR"})}),e("div",{className:"m-4",children:e(y,{to:"/table5",activeStyle:{color:"black"},children:"FIVE"})}),e("div",{className:"m-4",children:e(y,{to:"/table6",activeStyle:{color:"black"},children:"SIX"})})]}),K=({array:l})=>{const[d,n]=f.exports.useState([]),i=async()=>{await m.get("https://project-smokybar.herokuapp.com/ordername").then(a=>{n(a.data),console.log(a.data)})};return f.exports.useEffect(()=>{i()},[]),o($,{children:[e(H,{}),o(A,{children:[e(x,{path:"/table1",children:e(N,{tableid:1,fetchOrdersFromTable:i,orderNames:d,array:l})}),e(x,{path:"/table2",children:e(N,{tableid:2,fetchOrdersFromTable:i,orderNames:d,array:l})}),e(x,{path:"/table3",children:e(N,{tableid:3,fetchOrdersFromTable:i,orderNames:d,array:l})}),e(x,{path:"/table4",children:e(N,{tableid:4,fetchOrdersFromTable:i,orderNames:d,array:l})}),e(x,{path:"/table5",children:e(N,{tableid:5,fetchOrdersFromTable:i,orderNames:d,array:l})}),e(x,{path:"/table6",children:e(N,{tableid:6,fetchOrdersFromTable:i,orderNames:d,array:l})})]})]})},q=()=>o("div",{className:"w-screen bg-white flex items-center justify-center font-bold",children:[e("div",{className:"m-4",children:e(B,{to:"/orders",children:"ORDERS"})}),e("div",{className:"m-4",children:e(B,{to:"/inventory",children:"INVENTORY"})})]});function z(){const[l,d]=f.exports.useState([]),n=async()=>{await m.get("https://project-smokybar.herokuapp.com/inventory").then(i=>{d(i.data),console.log(i.data)})};return f.exports.useEffect(()=>{n()},[]),o($,{children:[e(q,{}),o(A,{children:[e(x,{exact:!0,path:"/orders",children:e(K,{array:l})}),e(x,{exact:!0,path:"/inventory",children:e(X,{array:l,setArray:d,fetchInventory:n})})]})]})}V.render(e(Y.StrictMode,{children:e(z,{})}),document.getElementById("root"));
